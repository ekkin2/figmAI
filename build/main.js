(()=>{var l=Object.defineProperty,F=Object.defineProperties,U=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertyNames,w=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var A=(n,t,r)=>t in n?l(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,S=(n,t)=>{for(var r in t||(t={}))C.call(t,r)&&A(n,r,t[r]);if(w)for(var r of w(t))B.call(t,r)&&A(n,r,t[r]);return n},M=(n,t)=>F(n,D(t));var h=(n,t)=>()=>(n&&(t=n(n=0)),t);var G=(n,t)=>{for(var r in t)l(n,r,{get:t[r],enumerable:!0})},z=(n,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let f of O(t))!C.call(n,f)&&f!==r&&l(n,f,{get:()=>t[f],enumerable:!(a=U(t,f))||a.enumerable});return n};var L=n=>z(l({},"__esModule",{value:!0}),n);function R(n,t){let r=`${T}`;return T+=1,d[r]={handler:t,name:n},function(){delete d[r]}}function p(n,t){let r=!1;return R(n,function(...a){r!==!0&&(r=!0,t(...a))})}function E(n,t){for(let r in d)d[r].name===n&&d[r].handler.apply(null,t)}var d,T,v=h(()=>{d={},T=0;typeof window=="undefined"?figma.ui.onmessage=function([n,...t]){E(n,t)}:window.onmessage=function(n){if(typeof n.data.pluginMessage=="undefined")return;let[t,...r]=n.data.pluginMessage;E(t,r)}});function y(n,t){if(typeof __html__=="undefined")throw new Error("No UI defined");let r=`<div id="create-figma-plugin"></div><script>document.body.classList.add('theme-${figma.editorType}');const __FIGMA_COMMAND__='${typeof figma.command=="undefined"?"":figma.command}';const __SHOW_UI_DATA__=${JSON.stringify(typeof t=="undefined"?{}:t)};${__html__}<\/script>`;figma.showUI(r,M(S({},n),{themeColors:typeof n.themeColors=="undefined"?!0:n.themeColors}))}var _=h(()=>{});var I=h(()=>{v();_()});var b={};G(b,{default:()=>j});function j(){p("CREATE_RECTANGLES",async function(n){console.log("HERE!"),console.log("Trying open ai..."),figma.closePlugin()}),p("CLOSE",function(){figma.closePlugin()}),p("GPT",async function(n){console.log("GPT!",n);function t(s,o){for(let i in o){let e=o[i];if(i==="data"&&e&&typeof e=="object"){let m=JSON.parse(s.getSharedPluginData("builder","data")||"{}")||{},x=Object.assign({},m,e);s.setSharedPluginData("builder","data",JSON.stringify(x))}else if(typeof e!="undefined"&&["width","height","type","ref","children","svg"].indexOf(i)===-1)try{s[i]=o[i]}catch(m){console.warn(`Assign error for property "${i}"`,s,o,m)}}}let r=s=>!!(s&&s.children);async function a(s,o,i=null){if(s&&await o(s,i),r(s))for(let e of s.children)await a(e,o,s)}let f={},V=(await figma.listAvailableFontsAsync()).filter(s=>s.fontName.style==="Regular"),H={family:"Roboto",style:"Regular"};await figma.loadFontAsync(H);let u=[],c=figma.currentPage,g=c;console.log("main layers: ",n);for(let s of n)await a(s,async(o,i)=>{try{if(console.log("Layer type: ",o.type),o.type==="FRAME"||o.type==="GROUP"){let e=figma.createFrame();e.x=o.x,e.y=o.y,e.resize(o.width||1,o.height||1),t(e,o),u.push(e),(i&&i.ref||c).appendChild(e),o.ref=e,i||(g=e,c=e)}else if(o.type==="SVG"){let e=figma.createNodeFromSvg(o.svg);e.x=o.x,e.y=o.y,e.resize(o.width||1,o.height||1),o.ref=e,u.push(e),t(e,o),(i&&i.ref||c).appendChild(e)}else if(o.type==="RECTANGLE"){let e=figma.createRectangle();t(e,o),e.resize(o.width||1,o.height||1),u.push(e),o.ref=e,(i&&i.ref||c).appendChild(e)}else if(o.type=="TEXT"){let e=figma.createText();t(e,o),await figma.loadFontAsync({family:"Inter",style:"Regular"}),e.characters=o.characters,o.ref=e,e.resize(o.width||1,o.height||1),e.textAutoResize="HEIGHT";let m=o.lineHeight&&o.lineHeight.value||o.height,N=0;for(;typeof e.fontSize=="number"&&typeof o.fontSize=="number"&&(e.height>Math.max(o.height,m)*1.2||e.width>o.width*1.2);){if(N++>o.fontSize*.3){console.warn("Too many font adjustments",e,o);break}try{e.fontSize=e.fontSize-1}catch(x){console.warn("Error on resize text:",o,e,x)}}u.push(e),(i&&i.ref||c).appendChild(e)}}catch(e){console.warn("Error on layer:",o,e)}});g.type==="FRAME"&&(figma.currentPage.selection=[g]),figma.ui.postMessage({type:"doneLoading",rootId:g.id}),figma.closePlugin()}),y({height:137,width:240})}var P=h(()=>{"use strict";I()});var k={"src/main.ts--default":(P(),L(b)).default},$="src/main.ts--default";k[$]();})();
